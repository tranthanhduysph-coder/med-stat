<div class="prose">
    <h2>Chương 9: Tính toán và Xử lý Số liệu (Data Transformation)</h2>
    <p>Sau khi làm sạch, chúng ta cần biến đổi dữ liệu thô thành các biến sẵn sàng cho phân tích (ví dụ: nhóm tuổi, chỉ số BMI).</p>

    <h3>9.1. Tạo biến mới (Compute Variable)</h3>
    <p>Dùng khi bạn muốn tạo một biến mới dựa trên phép tính từ các biến hiện có.</p>
    <p><strong>Ví dụ: Tính BMI từ <code>can_nang</code> (kg) và <code>chieu_cao</code> (cm).</strong></p>
    <ul>
        <li><strong>Cách làm:</strong> Vào <strong>Transform</strong> → <strong>Compute Variable...</strong></li>
        <li>Trong ô "Target Variable" (Biến đích), gõ tên biến mới: <code>BMI</code>.</li>
        <li>Trong ô "Numeric Expression" (Biểu thức), gõ công thức:
            <br><code>can_nang / ((chieu_cao / 100) ** 2)</code>
        </li>
        <li>Nhấn OK. SPSS sẽ tạo một cột <code>BMI</code> mới ở cuối Data View.</li>
    </ul>

    <h3>9.2. Tái mã hóa biến (Recode Variable)</h3>
    <p>Dùng khi bạn muốn gộp nhóm (định lượng → định tính) hoặc thay đổi giá trị mã hóa.</p>
    <p><strong>Ví dụ: Tạo biến <code>nhom_tuoi</code> (1='<25', 2='25-34', 3='≥35') từ biến <code>tuoi</code>.</strong></p>
    <p>Luôn ưu tiên dùng <strong>"Recode into Different Variables"</strong> (Tái mã hóa sang biến khác) để giữ lại biến gốc.</p>
    <ul>
        <li><strong>Cách làm:</strong> <strong>Transform</strong> → <strong>Recode into Different Variables...</strong></li>
        <li>Chuyển biến <code>tuoi</code> vào ô giữa.</li>
        <li>Ở ô "Output Variable" (Biến đầu ra) bên phải, gõ tên biến mới: <code>nhom_tuoi</code>. Nhấn <strong>Change</strong>.</li>
        <li>Nhấp vào nút <strong>"Old and New Values..."</strong>.</li>
        <li>Thiết lập các quy tắc:
            <ul>
                <li>Bên trái (Old Value): Chọn "Range, LOWEST through value:", gõ <code>24</code>.</li>
                <li>Bên phải (New Value): Gõ <code>1</code>. Nhấn <strong>Add</strong>.</li>
            </ul>
            <ul>
                <li>Bên trái: Chọn "Range:", gõ <code>25</code> và <code>34</code>.</li>
                <li>Bên phải: Gõ <code>2</code>. Nhấn <strong>Add</strong>.</li>
            </ul>
            <ul>
                <li>Bên trái: Chọn "Range, value through HIGHEST:", gõ <code>35</code>.</li>
                <li>Bên phải: Gõ <code>3</code>. Nhấn <strong>Add</strong>.</li>
            </ul>
        </li>
        <li>Nhấn <strong>Continue</strong>, sau đó nhấn <strong>OK</strong>.</li>
        <li><strong>QUAN TRỌNG:</strong> Quay lại Variable View, tìm biến <code>nhom_tuoi</code> mới, và khai báo <strong>Values</strong> (1="<25", 2="25-34", 3="≥35") và <strong>Measure</strong> (Ordinal) cho nó.</li>
    </ul>

    <h3>9.3. Lọc dữ liệu (Select Cases)</h3>
    <p>Dùng khi bạn muốn phân tích trên một nhóm đối tượng cụ thể (ví dụ: chỉ phân tích ở nhóm Nữ).</p>
    <ul>
        <li><strong>Cách làm:</strong> <strong>Data</strong> → <strong>Select Cases...</strong></li>
        <li>Chọn "If condition is satisfied". Nhấp vào nút "If...".</li>
        <li>Gõ điều kiện: <code>gioi_tinh = 2</code> (giả sử 2=Nữ).</li>
        <li>Nhấn <strong>Continue</strong>.</li>
        <li>Chọn "Filter out unselected cases" (Các ca không thỏa mãn sẽ bị gạch chéo, nhưng không bị xóa).</li>
        <li>Nhấn <strong>OK</strong>.</li>
        <li>Từ giờ, mọi phân tích bạn chạy (Frequencies, T-Test...) sẽ chỉ thực hiện trên nhóm Nữ.</li>
        <li><strong>LƯU Ý:</strong> Nhớ tắt chế độ này (chọn "All cases") sau khi phân tích xong.</li>
    </ul>

    <h3>9.4. Phân nhóm dữ liệu (Split File)</h3>
    <p>Dùng khi bạn muốn SPSS tự động chạy 1 phân tích song song cho nhiều nhóm.</p>
    <ul>
        <li><strong>Cách làm:</strong> <strong>Data</strong> → <strong>Split File...</strong></li>
        <li>Chọn "Compare groups".</li>
        <li>Chuyển biến nhóm (ví dụ: <code>gioi_tinh</code>) vào ô "Groups Based on:".</li>
        <li>Nhấn <strong>OK</strong>.</li>
        <li>Bây giờ, nếu bạn chạy <strong>Analyze</strong> → <strong>Descriptive Statistics</strong> → <strong>Descriptives...</strong> cho biến "Hb", SPSS sẽ tự động xuất 2 bảng: 1 cho Nam và 1 cho Nữ.</li>
        <li><strong>LƯU Ý:</strong> Nhớ tắt chế độ này (chọn "Analyze all cases, do not create groups") sau khi xong.</li>
    </ul>
</div>